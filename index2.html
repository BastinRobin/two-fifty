<!doctype html>
<html><head>
<title>Track IMDb Top 250 movies</title>
<meta name="description" content="Track movies you've seen on the IMDb Top 250. Get recommendations. Compare your movie watching with others.">
<style>
/* 960.gs: reset.css */ html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outline:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}
/* 960.gs: 960.css */	.container_12,.container_16{margin-left:auto;margin-right:auto;width:960px}.grid_1,.grid_2,.grid_3,.grid_4,.grid_5,.grid_6,.grid_7,.grid_8,.grid_9,.grid_10,.grid_11,.grid_12,.grid_13,.grid_14,.grid_15,.grid_16{display:inline;float:left;margin-left:10px;margin-right:10px}.container_12 .grid_3,.container_16 .grid_4{width:220px}.container_12 .grid_6,.container_16 .grid_8{width:460px}.container_12 .grid_9,.container_16 .grid_12{width:700px}.container_12 .grid_12,.container_16 .grid_16{width:940px}.alpha{margin-left:0}.omega{margin-right:0}.container_12 .grid_1{width:60px}.container_12 .grid_2{width:140px}.container_12 .grid_4{width:300px}.container_12 .grid_5{width:380px}.container_12 .grid_7{width:540px}.container_12 .grid_8{width:620px}.container_12 .grid_10{width:780px}.container_12 .grid_11{width:860px}.container_16 .grid_1{width:40px}.container_16 .grid_2{width:100px}.container_16 .grid_3{width:160px}.container_16 .grid_5{width:280px}.container_16 .grid_6{width:340px}.container_16 .grid_7{width:400px}.container_16 .grid_9{width:520px}.container_16 .grid_10{width:580px}.container_16 .grid_11{width:640px}.container_16 .grid_13{width:760px}.container_16 .grid_14{width:820px}.container_16 .grid_15{width:880px}.container_12 .prefix_3,.container_16 .prefix_4{padding-left:240px}.container_12 .prefix_6,.container_16 .prefix_8{padding-left:480px}.container_12 .prefix_9,.container_16 .prefix_12{padding-left:720px}.container_12 .prefix_1{padding-left:80px}.container_12 .prefix_2{padding-left:160px}.container_12 .prefix_4{padding-left:320px}.container_12 .prefix_5{padding-left:400px}.container_12 .prefix_7{padding-left:560px}.container_12 .prefix_8{padding-left:640px}.container_12 .prefix_10{padding-left:800px}.container_12 .prefix_11{padding-left:880px}.container_16 .prefix_1{padding-left:60px}.container_16 .prefix_2{padding-left:120px}.container_16 .prefix_3{padding-left:180px}.container_16 .prefix_5{padding-left:300px}.container_16 .prefix_6{padding-left:360px}.container_16 .prefix_7{padding-left:420px}.container_16 .prefix_9{padding-left:540px}.container_16 .prefix_10{padding-left:600px}.container_16 .prefix_11{padding-left:660px}.container_16 .prefix_13{padding-left:780px}.container_16 .prefix_14{padding-left:840px}.container_16 .prefix_15{padding-left:900px}.container_12 .suffix_3,.container_16 .suffix_4{padding-right:240px}.container_12 .suffix_6,.container_16 .suffix_8{padding-right:480px}.container_12 .suffix_9,.container_16 .suffix_12{padding-right:720px}.container_12 .suffix_1{padding-right:80px}.container_12 .suffix_2{padding-right:160px}.container_12 .suffix_4{padding-right:320px}.container_12 .suffix_5{padding-right:400px}.container_12 .suffix_7{padding-right:560px}.container_12 .suffix_8{padding-right:640px}.container_12 .suffix_10{padding-right:800px}.container_12 .suffix_11{padding-right:880px}.container_16 .suffix_1{padding-right:60px}.container_16 .suffix_2{padding-right:120px}.container_16 .suffix_3{padding-right:180px}.container_16 .suffix_5{padding-right:300px}.container_16 .suffix_6{padding-right:360px}.container_16 .suffix_7{padding-right:420px}.container_16 .suffix_9{padding-right:540px}.container_16 .suffix_10{padding-right:600px}.container_16 .suffix_11{padding-right:660px}.container_16 .suffix_13{padding-right:780px}.container_16 .suffix_14{padding-right:840px}.container_16 .suffix_15{padding-right:900px}html body * span.clear,html body * div.clear,html body * li.clear,html body * dd.clear{background:none;border:0;clear:both;display:block;float:none;font-size:0;list-style:none;margin:0;padding:0;overflow:hidden;visibility:hidden;width:0;height:0}.clearfix:after{clear:both;content:'.';display:block;visibility:hidden;height:0}.clearfix{display:inline-block}* html .clearfix{height:1%}.clearfix{display:block}
/* 960.gs: text.css modified heavily */
body { font: 13px/1.5 Georgia, 'Times New Roman', serif; }
a:focus { outline: 1px dotted invert; }
p, dl, hr, ol, ul, pre, table, address, fieldset { margin-bottom: 1.5em; }
hr { border-color: #ccc; border-style: solid; border-width: 1px 0 0; clear: both; height: 0; }
h1 { font-size: 25px; }
ol { list-style: decimal; }
ul { list-style: square; }
li { margin-left: 30px; }

/* http://onehub.com/ fix for container to ensure height */
.container_12:after{clear:both;content:'.';display:block;visibility:hidden;height:0}
.container_12{display:inline-block}
* html .container_12{height:1%}
.container_12{display:block}

.blackbar { background-color: black; color: #eeece1; padding: 1.5em 0; }
.blackbar a { color: #eeece1; }
{% if user %}#subheader-bar { display:none; }{% endif %}
h1 a { display:block; text-indent: -1000px; width:304px; height:60px; background: url('/track-top-250.png'); }
.login-box { text-align: center; font: bold 16px sans-serif; width:300px; height:38px; padding: 0; background: url('/login-button.png'); }
.login { display:block; padding-top: 10px; text-decoration: none; }
input, textarea { background-color: #9bbb59; }

.mainbar h2 { font: bold 16px Geneva, Arial, sans-serif; margin-bottom: 0.5em; border-bottom: 5px solid #4f6228; color: #4f6228; }
.mainbar a { color: #4f6228; }
.mainbar .stats { font-style: italic; font-size: 12px; }
.mainbar .diff { text-decoration: none; color: #da1f28; font: bold 11px Geneva,Arial,sans-serif; }

.movies { width: 100%; }
.movies td, .movies th { height: 22px; vertical-align: middle; }
.movies th { text-align: left; padding: 0 3px; font-weight: normal; }
.movies th, .box { background-color: #9bbb59; }
.box { float:right; overflow:hidden; margin-bottom: 0.5em; padding-right: 5px; width: 250px; }
.box a { display:block; text-align: right; color: #000; text-decoration: none; }

.instructions { color: #4f6228; font-style: italic; }
#filter { float:right; border: 1px solid #4f6228; border-width: 1px 0 0 1px; }
#top_watchers td, #recent_watchers td { padding-right: 1em; }

.mi, .im { display:block; float:right; margin: 0 5px; width: 16px; height: 16px; }
.mi { background: url(http://www.mininova.org/favicon.ico); }
.im { background: url(http://www.imdb.com/favicon.ico); }

.seen, .seen a { text-decoration: line-through; color: #c3d69b; }
.person { color:#4f6228; }
.both { color: #ddd; font-style: normal; }
.other { color: #da1f28; font-style: italic; }
.neither { color: #ddd; }

.bottombar h2 { font-size: 23px; margin-bottom: 0.5em; }
.rss-icon { text-decoration: none; }
.source { font-size: 11px; width:100%; display:block; }
.widget-name { color: #9bbb59; font-weight: bold; }
</style>
</head><body>
<div class="blackbar">
	<div class="container_12">
		<div id="header-bar" class="grid_12">
			<div id="heading-box" class="alpha grid_8"><h1><a href="/">Track the IMDb Top 250</a></h1></div>
			<div class="omega grid_4 login-box"><div class="login-button">
				{% if user %}<a class="login" href="#">{% firstof user_info.disp user_info.user.nickname %} ({{ user_info.num }})</a>
				{% else %}<a class="login" href="/login">Sign in with your Google Account</a>
				{% endif %}
			</div></div>
		</div>
		<div id="subheader-bar" class="grid_12">
			<div class="alpha grid_8"><i>This application lets you mark movies that you have seen on the IMDb Top 250.<br>You can see which movies you've missed out, and compare your movie watching with others.</i></div>
			<div class="omega grid_4" style="text-align:right">
			{% if user %}
				<form id="userprefs" action="/" method="post">
					<input id="disp" name="disp" value="{% firstof user_info.disp user_info.user.nickname %}">
					<input type="submit" value="Change name">
				</form>
				or <a id="logout" href="/logout">click here to logout</a>
			{% else %}
				<i>If you don't have a Google Account,<br>click the button above to create one.</i>
			{% endif %}
			</div>
		</div>
	</div>
</div>

<div class="clear">&nbsp</div>
<div class="container_12 mainbar">
	<div class="grid_8">
	{% if can_change and new_movies %}
		<h2>New in the IMDb Top 250</h2>
		<table id="newmovies" class="sortable movies"><thead>
			<tr><th>Rank</th><th>Year</th><th>Movie</th><th>Rating</th><th>Votes</th></tr>
		</thead><tbody>
{% for movie in new_movies %}
<tr class="{% if movie.person and movie.other %}both {% else %}{% if movie.person %}person {% else %}{% if movie.other %}other {% else %}{% if other %}neither {% endif %}{% endif %}{% endif %}{% endif %}{% if movie.seen %}seen {% else %}unseen {% endif %}movie"><td>{{ movie.rank }}
</td><td>{{ movie.year }}
</td><td><a class="im" href="http://www.imdb.com{{ movie.url }}"></a>
{% if can_change %}<a class="x" data={{ movie.url }} href="#">{{ movie.title }}</a>{% else %}{{ movie.title }}{% endif %}
</td><td>{{ movie.rating }}
</td><td>{{ movie.votes }}
</td></tr>
{% endfor %}
		</tbody></table>
	{% endif %}
		<h2>
		{% if person %}
			<select id="filter">
				<option value="all" 			>All movies</option>
				{% if other %}
				<option value="person_not_other">Seen only by {% firstof person_info.disp person.nickname %} NOT {% firstof other_info.disp other.nickname %}</option>
				<option value="other_not_person">Seen only by {% firstof other_info.disp other.nickname %} NOT {% firstof person_info.disp person.nickname %}</option>
				<option value="both"			>Seen by Both</option>
				<option value="either"			>Seen by Either</option>
				<option value="neither" 		>Seen by Neither</option>
				<option value="person"			>Seen by {% firstof person_info.disp person.nickname %}</option>
				<option value="other"			>Seen by {% firstof other_info.disp other.nickname %}</option>
				{% else %}
				<option value="unseen"			>Show only unseen movies</option>
				<option value="seen"			>Show only seen   movies</option>
				{% endif %}
			</select>
		{% endif %}
		{% if person %}<span class="person">{% firstof person_info.disp person_info.user.nickname %}: {{ person_info.num }} / 250</span>
			{% if other %}vs <span class="other">{% firstof other_info.disp other_info.user.nickname %}: {{ other_info.num }} / 250</span>
			{% else %}
				{% if user %}{% ifnotequal user person %}<a class="diff" href="/compare/{% firstof person_info.disp person_info.user.email %}" title="Compare with yourself">diff</a>{% endifnotequal %}{% endif %}
			{% endif %}
		{% else %}IMDb Top 250
		{% endif %}
		</h2>
		{% if can_change %}<div class="instructions">Click on a movie to mark it as <span class="seen">seen</span>. Click again to toggle.</div>{% endif %}
		<table id="movies" class="sortable movies"><thead>
		<tr><th>Rank</th><th>Year</th><th>Movie</th><th>Rating</th><th>Votes</th></tr>
		</thead><tbody>
{% for movie in movies %}
<tr class="{% if movie.person and movie.other %}both {% else %}{% if movie.person %}person {% else %}{% if movie.other %}other {% else %}{% if other %}neither {% endif %}{% endif %}{% endif %}{% endif %}{% if movie.seen %}seen {% else %}unseen {% endif %}movie"><td>{{ movie.rank }}
</td><td>{{ movie.year }}
</td><td><a class="im" href="http://www.imdb.com{{ movie.url }}"></a>
{% if can_change %}<a class="x" data={{ movie.url }} href="#">{{ movie.title }}</a>{% else %}{{ movie.title }}{% endif %}
</td><td>{{ movie.rating }}
</td><td>{{ movie.votes }}
</td></tr>
{% endfor %}
		</tbody></table>
	</div>
	<div class="grid_4">
		{% if person_recos %}
		<h2>Recommendations for {% firstof person_info.disp person.nickname %}</h2>
		Based on people with similar interests.
		<ol id="person_recos">
		{% for movie in person_recos %}
			<li><a target="_blank" href="http://www.imdb.com{{ movie.url }}">{{ movie.title }}</a></li>
		{% endfor %}
		</ol>
		{% endif %}

		<h2>Top movie watchers</h2>
		<table id="top_watchers">
		{% for x in top_watchers %}
			<tr><td>{{ x.num }}</td><td>{% if x.disp %}<a href="/name/{{ x.disp|urlencode }}">{{ x.disp }}</a>{% else %}<a href="/user/{{ x.user.email }}">{{ x.user.nickname }}</a>{% endif %}
			{% if user %}{% ifnotequal user x.user %}<a href="/compare/{% firstof x.disp x.user.email %}" title="Compare with yourself" class="diff">diff</a>{% endifnotequal %}{% endif %}</td></tr>
		{% endfor %}
		</table>

		<h2>Recent movie watchers</h2>
		<table id="recent_watchers">
		{% for x in recent_users %}
			<tr><td>{{ x.num }}</td><td>{% if x.disp %}<a href="/name/{{ x.disp|urlencode }}">{{ x.disp }}</a>{% else %}<a href="/user/{{ x.user.email }}">{{ x.user.nickname }}</a>{% endif %}
				{% if user %}{% ifnotequal user x.user %}<a href="/compare/{% firstof x.disp x.user.email %}" title="Compare with yourself" class="diff">diff</a>{% endifnotequal %}{% endif %}
				<span class="stats">{{ now|timesince:x.time }} ago </span></td></tr>
		{% endfor %}
		</table>
	</div>
</div>
<div class="clear">&nbsp;</div>
<div class="blackbar bottombar">
	<div class="container_12">
		<div class="grid_6">
			<h2>API</h2>
			<p><a href="/data/root.node@gmail.com/count"><code>/data/<i>user</i>/count</code></a> returns the user's watched count
			<br><a href="/data/root.node@gmail.com/seen"><code>/data/<i>user</i>/seen</code></a> returns the user's seen / unseen movies
			<br><code>/data/all/users</code> is an <i>Admin</i> API that shows all users</p>
			<p>Results in returned in JSON, with <code>callback</code> support.
			<br>e.g. <a href="/data/root.node@gmail.com/count?callback=fn"><code>/data/<i>user</i>/count?callback=fn</code></a>.</p>
			<p><a class="rss-icon" type="application/rss+xml" rel="alternate" href="http://feeds.s-anand.net/imdbtop250"><img alt="" src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png"/> Subscribe to the IMDb Top 250</a></p>
			<p>This page is hosted by <a href="http://appengine.google.com/">Google AppEngine</a><br>The source code is at <a href="http://two-fifty.googlecode.com/">two-fifty.googlecode.com</a></p>
			<p>Authored by <a href="http://www.s-anand.net/">Anand</a></p>
		</div>
		<div class="grid_6">
		{% if user %}
			<h2>Widgets</h2>
			<textarea class="source" readonly>&lt;script src="http://250.s-anand.net/count.js"&gt;&lt;/script&gt;&lt;script src="http://250.s-anand.net/data/{{ person.email }}/count?callback=twofifty_count"&gt;&lt;/script&gt;</textarea>
			<p>Copy and paste the code above to add the <span class="widget-name">Movie Counter</span> widget to your website. It shows visitors the number of movies you've watched.</p>
			<textarea class="source" readonly>&lt;script src="http://250.s-anand.net/seen.js"&gt;&lt;/script&gt;&lt;script src="http://250.s-anand.net/data/{{ person.email }}/seen?callback=twofifty_seen"&gt;&lt;/script&gt;</textarea>
			<p>Copy and paste the code above to add the <span class="widget-name">Recent Movies</span> widget to your website. It shows the last 5 movies you watched on IMDb.</p>
		{% else %}
			<div class="login-box"><div class="login-button">
			<a class="login" href="/login">Sign in to add widgets to your site</a>
			</div></div>
		</div>
		{% endif %}
	</div>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script>
$('.movies tbody tr:odd').css('background-color', '#ebf8de');
$('.movies tr').find('td:eq(2)').each(function() { $(this).prepend('<a class="mi" href="http://www.mininova.org/search/' + $(this).text() + '/4/seeds"></a>'); });
$('.movies a.mi').attr('title', 'Search for torrent').attr('target', '_blank');
$('.movies a.im').attr('title', 'Open IMDb page in new window').attr('target', '_blank');
$('.source').click(function() { $(this).select(); });

$('#filter').change(function(e) {
	switch($(this).find('option:selected').attr('value')) {
		case 'all': 				$('.movies tr').show(); break;
		case 'seen':				$('.movies tr.seen').show(); $('.movies tr.unseen').hide(); break;
		case 'unseen':				$('.movies tr.unseen').show(); $('.movies tr.seen').hide(); break;
		case 'person':				$('.movies tr.person,tr.both').show(); $('.movies tr.other,tr.neither').hide(); break;
		case 'other':				$('.movies tr.other,tr.both').show(); $('.movies tr.person,tr.neither').hide(); break;
		case 'both':				$('.movies tr.both').show(); $('.movies tr.person,tr.other,tr.neither').hide(); break;
		case 'either':				$('.movies tr.person,tr.other,tr.both').show(); $('.movies tr.neither').hide(); break;
		case 'neither': 			$('.movies tr.neither').show(); $('.movies tr.person,tr.other,tr.both').hide(); break;
		case 'person_not_other':	$('.movies tr.person').show(); $('.movies tr.both,tr.other,tr.neither').hide(); break;
		case 'other_not_person':	$('.movies tr.other').show(); $('.movies tr.both,tr.person,tr.neither').hide(); break;
	}
});

if (window.pageTracker) {
	{% if not user %}$('.login').click(function() { pageTracker._trackPageview('/login'); });{% endif %}
	$('a.mi').click(function() { pageTracker._trackPageview('/clicked/mininova'); });
	$('a.im').click(function() { pageTracker._trackPageview('/clicked/imdb'); });
	$('a.x').click(function() { pageTracker._trackPageview('/clicked/movie'); });
	$('#filter').change(function() { pageTracker._trackPageview('/clicked/filter'); });
}

{% if user %}$('.login').click(function(e) { e.preventDefault(); $('#subheader-bar').slideToggle(); });{% endif %}

{% if can_change %}
$('.movies a.x').attr('title', 'Click to mark as seen or unseen').click(function(e) {
	e.preventDefault();
	var tgt = $(e.target), url = tgt.attr('data');
	tgt.parent().append('<img src="/loading-small.gif" alt="working..." class="working">');
	$.post('/', {movie: url}, function(response) {
		if (response == url) {
			var tr = tgt.parents('tr').eq(0);
			if		(tr.hasClass('seen'  )) { tr.addClass('unseen').removeClass('seen'	); }
			else if (tr.hasClass('unseen')) { tr.addClass('seen'  ).removeClass('unseen'); }
			tr.find('.working').remove();
			$('#count').text($('tr.seen').length);
		}
	});
});
{% endif %}

</script>
<script src="http://kryogenix.org/code/browser/sorttable/sorttable.js"></script>
<!-- script src="http://asset.userfly.com/users/12427/userfly.js" type="text/javascript"></script -->
<style type='text/css'>@import url('http://s3.amazonaws.com/getsatisfaction.com/feedback/feedback.css');</style>
<script src='http://s3.amazonaws.com/getsatisfaction.com/feedback/feedback.js' type='text/javascript'></script>
<script>
var tab_options = {}
tab_options.placement = "left";  // left, right, bottom, hidden
tab_options.color = "#222"; // hex (#FF0000) or color (red)
GSFN.feedback('http://getsatisfaction.com/twofifty/feedback/topics/new?display=overlay&style=idea', tab_options);
</script>
<script>
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>try {
	var pageTracker = _gat._getTracker("UA-7269195-1");
	pageTracker._setVar("new-green");
	pageTracker._trackPageview();
} catch(err) {}</script>
<!-- script type="text/javascript">try { setTimeout(function() { $.getScript('/build-reco.js'); }, 5000); } catch(err) {}</script -->
</body></html>
